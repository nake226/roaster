(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,n){t.exports=n(41)},41:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(9),s=n.n(i),o=n(10),l=n(11),u=n(14),c=n(12),h=n(15),m=n(13),p=n.n(m),d=function(t){return r.a.createElement("ul",{className:"roster"},t.group.item_list.map(function(t,e){return r.a.createElement("li",{key:e},r.a.createElement("img",{src:t.photo_url,alt:"aaa"}),t.user_name)}))},g=function(t){return r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:function(e){return t.setQuery(e)},placeholder:"\u691c\u7d22\u3057\u305f\u3044\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),r.a.createElement("button",{onClick:function(e){return t.getWordSearchResult(t.inputText)}},"\u691c\u7d22"))},f=[],v=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={inputText:"",isLogin:!1,departmentList:[],user:null,group:null},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.httpClient=p.a.create({baseURL:"https://kadou.i.nijibox.net/api",withCredentials:!0}),this.loadAuth().then(function(){return t.state.isLogin?t.loadCreative():Promise.resolve()}).catch(function(t){alert("API\u304c\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u307e\u3057\u305f\n\n"+t)})}},{key:"loadAuth",value:function(){var t=this;return this.httpClient.get("/auth",{params:{callback:"http://localhost:3000"}}).then(this.commonResponseHandling).then(function(e){e.is_login?t.setState({isLogin:!0}):e.auth_url&&(window.location.href=e.auth_url)})}},{key:"loadDepartments",value:function(){var t=this;return this.httpClient.get("/who/departments").then(this.commonResponseHandling).then(function(e){t.setState({departmentList:e})})}},{key:"loadUser",value:function(){var t=this;return this.httpClient.get("/who/user/1").then(this.commonResponseHandling).then(function(e){t.setState({user:e})})}},{key:"loadCreative",value:function(){var t=this;return this.httpClient.get("/who/search?department_id=5").then(this.commonResponseHandling).then(function(e){f=e,20===e.item_list.length?t.httpClient.get("/who/search?department_id=5&page=2").then(t.commonResponseHandling).then(function(e){f.item_list=f.item_list.concat(e.item_list),20===e.item_list.length?t.httpClient.get("/who/search?department_id=5&page=3").then(t.commonResponseHandling).then(function(e){f.item_list=f.item_list.concat(e.item_list),20!==e.item_list.length?(console.log("\uff13\u56de\u3067\u53d6\u5f97\u5b8c\u4e86"),t.setState({group:f})):console("\u30af\u30ea\u30a8\u30a4\u30c6\u30a3\u30d6\u5ba4\u305d\u3093\u306a\u306b\u5897\u3048\u305f\u306e\uff1f")}):(console.log("\uff12\u56de\u3067\u53d6\u5f97\u5b8c\u4e86"),t.setState({group:f}))}):(console.log("\uff11\u56de\u3067\u53d6\u5f97\u5b8c\u4e86"),t.setState({group:f}))})}},{key:"setQuery",value:function(t){this.setState({inputText:t.target.value})}},{key:"getWordSearchResult",value:function(t){var e=this;return this.httpClient.get("/who/search/",{params:{query:t}}).then(this.commonResponseHandling).then(function(t){e.setState({group:t})})}},{key:"commonResponseHandling",value:function(t){return"200"!==t.data.code?(console.error(t.data.data),Promise.reject("API Error:"+t.data.data.message)):Promise.resolve(t.data.data)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"header"},r.a.createElement("p",{className:"header__title"},"- Niji Roaster -"),r.a.createElement("img",{src:"https://nijibox.jp/wp-content/themes/nijibox/images/common/logo_nb.svg",alt:"\u30cb\u30b8\u30dc\u30c3\u30af\u30b9!!"})),r.a.createElement(g,{className:"searchForm",setQuery:function(e){return t.setQuery(e)},getWordSearchResult:function(e){return t.getWordSearchResult(e)},inputText:this.state.inputText}),this.state.user&&r.a.createElement("div",null,this.state.user.user_id,this.state.user.user_name,r.a.createElement("br",null),this.state.user.description,r.a.createElement("img",{src:this.state.user.main_photo_url,alt:"aaa"})),r.a.createElement("ul",null,this.state.departmentList.map(function(t,e){return r.a.createElement("li",{key:e},t.department_name)})),this.state.group&&r.a.createElement("div",null,r.a.createElement(d,{group:this.state.group})))}}]),e}(a.Component);s.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.45e3d7ea.chunk.js.map
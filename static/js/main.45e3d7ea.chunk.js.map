{"version":3,"sources":["components/MemberList.js","components/Form.js","App.js","index.js"],"names":["MemberList","props","react_default","a","createElement","className","group","item_list","map","row","index","key","src","photo_url","alt","user_name","Form","type","onChange","e","setQuery","placeholder","onClick","getWordSearchResult","inputText","creativeRoaster","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","isLogin","departmentList","user","_this2","httpClient","axios","create","baseURL","withCredentials","loadAuth","then","loadCreative","Promise","resolve","catch","err","alert","_this3","get","params","callback","commonResponseHandling","result","is_login","setState","auth_url","window","location","href","_this4","_this5","_this6","length","concat","console","log","target","value","word","_this7","query","res","data","code","error","reject","message","_this8","components_Form","user_id","description","main_photo_url","department_name","components_MemberList","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.45e3d7ea.chunk.js","sourcesContent":["import React from \"react\";\n\nconst MemberList = props => {\n  return (\n    <ul className=\"roster\">\n      {props.group.item_list.map((row, index) => {\n        return (\n          <li key={index}>\n            <img src={row.photo_url} alt=\"aaa\" />\n            {row.user_name}\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nexport default MemberList;\n","import React from \"react\";\n\nconst Form = props => {\n  return (\n    <div>\n      <input\n        type=\"text\"\n        onChange={e => props.setQuery(e)}\n        placeholder=\"検索したいワードを入力してください\"\n      />\n      <button onClick={e => props.getWordSearchResult(props.inputText)}>\n        検索\n      </button>\n    </div>\n  );\n};\nexport default Form;\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport MemberList from \"./components/MemberList\";\nimport Form from \"./components/Form\";\n\n// クリエイティブ室の一時的な配列\nvar creativeRoaster = [];\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    /**\n     * stateで何を管理するか\n     * want：部署名\n     */\n    this.state = {\n      inputText: \"\",\n      isLogin: false,\n      departmentList: [],\n      user: null,\n      group: null\n    };\n  }\n\n  // コンポーネントのマウント時\n  componentDidMount() {\n    this.httpClient = axios.create({\n      baseURL: \"https://kadou.i.nijibox.net/api\",\n      withCredentials: true\n    });\n\n    // 認証関数の呼び出し\n    this.loadAuth()\n      .then(() => {\n        if (!this.state.isLogin) {\n          return Promise.resolve();\n        }\n        // 初期表示で出てくる部署一覧\n        return this.loadCreative();\n      })\n      .catch(err => {\n        alert(\"APIがエラーを返しました\\n\\n\" + err);\n      });\n  }\n\n  // 認証関数の定義\n  loadAuth() {\n    return this.httpClient\n      .get(\"/auth\", { params: { callback: \"http://localhost:3000\" } })\n      .then(this.commonResponseHandling)\n      .then(result => {\n        if (result.is_login) {\n          this.setState({ isLogin: true });\n        } else if (result.auth_url) {\n          window.location.href = result.auth_url;\n        }\n      });\n  }\n\n  // 部署名を返す\n  loadDepartments() {\n    return this.httpClient\n      .get(\"/who/departments\")\n      .then(this.commonResponseHandling)\n      .then(result => {\n        this.setState({ departmentList: result });\n      });\n  }\n\n  // ユーザを返す\n  loadUser() {\n    return this.httpClient\n      .get(\"/who/user/1\")\n      .then(this.commonResponseHandling)\n      .then(result => {\n        this.setState({ user: result });\n      });\n  }\n\n  // クリエイティブ室を返す\n  loadCreative() {\n    return this.httpClient\n      .get(\"/who/search?department_id=5\")\n      .then(this.commonResponseHandling)\n      .then(result => {\n        // ここで20名\n        creativeRoaster = result;\n        if (result.item_list.length === 20) {\n          this.httpClient\n            .get(\"/who/search?department_id=5&page=2\")\n            .then(this.commonResponseHandling)\n            .then(result => {\n              // ここで40名\n              creativeRoaster.item_list = creativeRoaster.item_list.concat(\n                result.item_list\n              );\n              if (result.item_list.length === 20) {\n                this.httpClient\n                  .get(\"/who/search?department_id=5&page=3\")\n                  .then(this.commonResponseHandling)\n                  .then(result => {\n                    // ここで60名\n                    creativeRoaster.item_list = creativeRoaster.item_list.concat(\n                      result.item_list\n                    );\n                    if (result.item_list.length !== 20) {\n                      console.log(\"３回で取得完了\");\n                      this.setState({ group: creativeRoaster });\n                    } else {\n                      console(\"クリエイティブ室そんなに増えたの？\");\n                    }\n                  });\n              } else {\n                console.log(\"２回で取得完了\");\n                this.setState({ group: creativeRoaster });\n              }\n            });\n        } else {\n          console.log(\"１回で取得完了\");\n          this.setState({ group: creativeRoaster });\n        }\n      });\n  }\n\n  // テキストのセット\n  setQuery(e) {\n    this.setState({\n      inputText: e.target.value\n    });\n  }\n\n  // ワード検索\n  getWordSearchResult(word) {\n    return this.httpClient\n      .get(\"/who/search/\", { params: { query: word } })\n      .then(this.commonResponseHandling)\n      .then(result => {\n        this.setState({ group: result });\n      });\n  }\n\n  commonResponseHandling(res) {\n    if (res.data.code !== \"200\") {\n      console.error(res.data.data);\n      return Promise.reject(\"API Error:\" + res.data.data.message);\n    }\n    return Promise.resolve(res.data.data);\n  }\n\n  /**\n   * 関数のまとめ\n   */\n\n  /*\n   * API通信をする関数\n   * componentDidMount()で行う\n   */\n\n  /**\n   * 社員を表示する関数\n   * loadUser()的な感じ\n   */\n\n  /**\n   * 部署名を変更する関数\n   * changeDep()的な感じ\n   */\n\n  render() {\n    return (\n      <div className=\"App\">\n        {/* ヘッダー\n          must：アプリケーション名\n          want：tableViewとcollectionViewの切り替えとか\n          component：\n            Header：./layout/配下に置く\n         */}\n        <header className=\"header\">\n          <p className=\"header__title\">- Niji Roaster -</p>\n          <img\n            src=\"https://nijibox.jp/wp-content/themes/nijibox/images/common/logo_nb.svg\"\n            alt=\"ニジボックス!!\"\n          />\n        </header>\n        {/* ナビ\n          want：部署を押下すると表示が変わるナビ\n         */}\n        {/* コンテンツ\n          must：社員が誰かしら表示される\n          want：アニメーション\n          component：\n            MemberList：TodoListみたいな感じ\n              ./components/配下に置く\n            Member：1つのTodoみたいな感じ\n              ./components/配下に置く\n         */}\n\n        {/* 検索フォーム */}\n        <Form\n          className=\"searchForm\"\n          setQuery={e => this.setQuery(e)}\n          getWordSearchResult={word => this.getWordSearchResult(word)}\n          inputText={this.state.inputText}\n        />\n\n        {this.state.user && (\n          <div>\n            {this.state.user.user_id}\n            {this.state.user.user_name}\n            <br />\n            {this.state.user.description}\n            <img src={this.state.user.main_photo_url} alt=\"aaa\" />\n          </div>\n        )}\n        <ul>\n          {this.state.departmentList.map((row, index) => {\n            return <li key={index}>{row.department_name}</li>;\n          })}\n        </ul>\n        {/* クリエイティブ室の表示 */}\n        {this.state.group && (\n          <div>\n            <MemberList group={this.state.group} />\n          </div>\n        )}\n        {/* フッター\n          must：特にないなあ\n          want：上部に戻る？的な？\n          component：\n            Footer：./layout/配下に置く\n         */}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\n// レンダリング\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}